---
interface Props {
  heading: string;
  id: string;
  entries: Array<{
    period: string;
    title: string;
    organization: string;
    description?: string;
    highlights?: string[];
    degree?: string;
    institution?: string;
  }>;
  bgAlt?: boolean;
}

const { heading, id, entries, bgAlt } = Astro.props;
---
{entries.length > 0 && (
<section id={id} class={`px-6 ${bgAlt ? 'bg-section-alt' : ''}`} style="padding-block: var(--space-section);">
  <div class="mx-auto max-w-4xl">
    <h2 class="font-bold accent-line" data-animate="fade-up" style={`font-size: var(--heading-2); line-height: var(--leading-tight); color: var(--text); margin-bottom: var(--space-section-inner);`}>{heading}</h2>

    <div class="relative mt-12" role="list">
      <div data-timeline-line class="absolute left-[15px] top-0 bottom-0 w-[2px]" style="background: linear-gradient(180deg, var(--accent), var(--border)); transform-origin: top;" aria-hidden="true"></div>

      {entries.map((entry, i) => (
        <div data-timeline-entry role="listitem" aria-label={`${entry.title || entry.degree} â€” ${entry.organization || entry.institution}`} class={`relative pl-12 ${i < entries.length - 1 ? 'mb-10' : ''}`}>
          <div data-timeline-dot
               class={`absolute left-[9px] top-2 rounded-full border-2 ${i === 0 ? 'w-[14px] h-[14px]' : 'w-[12px] h-[12px]'}`}
               style={`border-color: var(--accent); background: ${i === 0 ? 'var(--accent)' : 'var(--bg)'};`}>
          </div>

          <div class={i === 0 ? 'card px-5 py-4' : ''}>
            <span class="inline-block px-3 py-1 rounded-full font-medium mb-2" style={`font-size: var(--text-xs); background: var(--accent-glow); color: var(--accent);`}>
              {entry.period}
            </span>

            <h3 class="font-semibold" style={`font-size: var(--heading-4); color: var(--text);`}>
              {entry.title || entry.degree}
            </h3>

            {(entry.organization || entry.institution) && (
              <p class="mt-0.5" style={`color: var(--text-muted); font-size: var(--text-body);`}>
                {entry.organization || entry.institution}
              </p>
            )}

            {entry.description && (
              <div class="mt-3" style={`color: var(--text-muted); font-size: var(--text-sm); line-height: var(--leading-relaxed);`} set:html={entry.description} />
            )}

            {entry.highlights && entry.highlights.length > 0 && (
              <ul class="mt-3 space-y-1">
                {entry.highlights.map(h => (
                  <li class="flex items-center gap-2" style={`font-size: var(--text-sm); color: var(--text-muted);`}>
                    <div class="w-1.5 h-1.5 rounded-full flex-shrink-0" style="background: var(--accent);" />
                    {h}
                  </li>
                ))}
              </ul>
            )}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
)}
